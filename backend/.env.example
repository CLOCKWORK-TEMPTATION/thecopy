# ===================================================================
# Backend Environment Configuration Template
# ===================================================================
# Copy this file to .env and fill in the required values
# Never commit .env to version control
# ===================================================================

# -------------------------------------------------------------------
# Runtime Environment
# -------------------------------------------------------------------
# Options: development, production, test
NODE_ENV=development

# Server port
PORT=3001

# -------------------------------------------------------------------
# Database Configuration
# -------------------------------------------------------------------
# PostgreSQL connection URL (Neon recommended)
# Format: postgresql://user:password@host:5432/dbname?sslmode=require
DATABASE_URL=postgresql://localhost:5432/thecopy_dev

# MongoDB connection URL (optional)
# Format: mongodb+srv://username:password@host/database?options
MONGODB_URI=

# -------------------------------------------------------------------
# AI/ML Services - Gemini API
# -------------------------------------------------------------------
# Get your API key from: https://makersuite.google.com/app/apikey
# IMPORTANT: Keep these secret! Never expose to client-side code
GOOGLE_GENAI_API_KEY=
GEMINI_API_KEY=

# -------------------------------------------------------------------
# Security - Authentication
# -------------------------------------------------------------------
# JWT Secret for token signing/verification
# CRITICAL: Must be at least 32 characters in production
# Generate with: openssl rand -base64 48
JWT_SECRET=dev-secret-change-this-in-production-min-32-chars

# -------------------------------------------------------------------
# CORS Configuration
# -------------------------------------------------------------------
# Comma-separated list of allowed origins
# In production: use your actual frontend URL (no wildcards)
CORS_ORIGIN=http://localhost:5000,http://localhost:9002

# Frontend URL for redirects
FRONTEND_URL=http://localhost:5000

# -------------------------------------------------------------------
# Rate Limiting
# -------------------------------------------------------------------
# Rate limit window in milliseconds (default: 15 minutes)
RATE_LIMIT_WINDOW_MS=900000

# Maximum requests per window (default: 100)
RATE_LIMIT_MAX_REQUESTS=100

# -------------------------------------------------------------------
# Redis Configuration
# -------------------------------------------------------------------
# Option 1: Redis URL (recommended for cloud providers)
# Format: redis://:password@host:port
# REDIS_URL=redis://localhost:6379

# Option 2: Individual variables (for Docker/local)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# Redis Sentinel (High Availability) - Production only
REDIS_SENTINEL_ENABLED=false
REDIS_SENTINELS=127.0.0.1:26379,127.0.0.1:26380,127.0.0.1:26381
REDIS_MASTER_NAME=mymaster
REDIS_SENTINEL_PASSWORD=

# -------------------------------------------------------------------
# Sentry Configuration (Error Tracking & APM)
# -------------------------------------------------------------------
# Get your configuration from: https://sentry.io/settings/
SENTRY_DSN=
SENTRY_ORG=
SENTRY_PROJECT=
SENTRY_AUTH_TOKEN=
SENTRY_RELEASE=

# Server name for multi-instance deployments (optional)
SENTRY_SERVER_NAME=

# -------------------------------------------------------------------
# OpenTelemetry Distributed Tracing
# -------------------------------------------------------------------
# Enable/disable distributed tracing
TRACING_ENABLED=false

# OpenTelemetry Collector endpoint
# For Jaeger: http://localhost:4318/v1/traces
# For managed services: https://your-otlp-endpoint.com/v1/traces
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318/v1/traces

# Service name for tracing
SERVICE_NAME=thecopy-backend

# OpenTelemetry log level (debug, info, warn, error)
OTEL_LOG_LEVEL=info

# Optional: Authentication token for OTLP endpoint
# OTEL_AUTH_TOKEN=

# -------------------------------------------------------------------
# Redis AI LangCache (Optional - Advanced AI Caching)
# -------------------------------------------------------------------
# LANGCACHE_API_KEY=
# LANGCACHE_SERVER_URL=https://aws-us-east-1.langcache.redis.io
# LANGCACHE_CACHE_ID=

# -------------------------------------------------------------------
# Prisma Accelerate (Optional - Query Caching)
# -------------------------------------------------------------------
# PRISMA_ACCELERATE_URL=prisma+postgres://accelerate.prisma-data.net/?api_key=YOUR_KEY

# ===================================================================
# Production Deployment Checklist
# ===================================================================
# Before deploying to production, ensure:
# 1. NODE_ENV=production
# 2. JWT_SECRET is set to a strong random value (min 32 chars)
# 3. DATABASE_URL points to production database with SSL
# 4. GOOGLE_GENAI_API_KEY or GEMINI_API_KEY is set
# 5. CORS_ORIGIN is set to your production frontend URL (no wildcards)
# 6. Rate limiting values are appropriate for your load
# 7. SENTRY_DSN is configured for error tracking
# 8. Redis is configured for caching and queues
# 9. TRACING_ENABLED=true with proper OTEL_EXPORTER_OTLP_ENDPOINT
# 10. All security headers are enabled (via Helmet)
# ===================================================================
